#SPDX-License-Identifier: MIT-0
# Nethermind Configuration File
# Generated by Ansible on {{ ansible_date_time.date }}

# Network configuration
{
  "Network": {
    "ActivePeersMaxCount": 100,
    "PeersDumpPath": "peers.txt",
    "StaticPeers": [],
    "TrustedPeers": [],
    "DiagTracerEnabled": false,
    "NettyArenaOrder": 0,
    "MaxNumOutboundPeers": 100,
    "MaxNumInboundPeers": 100,
    "MaxNumPriorityPeers": 25,
    "P2PPort": 30303,
    "P2PInterface": "0.0.0.0",
    "EnableUPnP": false,
    "OnlyStaticPeers": false,
    "DisableDiscovery": false,
    "DisableDiscoveryMode": "None",
    "Bootnodes": [],
    "ReservedPeers": [],
    "ReservedPeersOnly": false,
    "PriorityPeersMaxCount": 10,
    "PriorityPeersMaxPersisted": 1000,
    "PriorityPeersPersistenceInterval": 300,
    "PriorityPeersPersistenceDir": "priority_peers",
    "PriorityPeersPersistenceFile": "priority_peers.txt",
    "PriorityPeersPersistenceEnabled": true
  },

  # Sync configuration
  "Sync": {
    "FastSync": {{ nethermind_fast_sync | lower }},
    "FastBlocks": {{ nethermind_fast_blocks | lower }},
    "DownloadBodiesInFastSync": {{ nethermind_download_bodies_in_fast_sync | lower }},
    "DownloadReceiptsInFastSync": {{ nethermind_download_receipts_in_fast_sync | lower }},
    "UseGethLimitsInFastBlocks": true,
    "PivotNumber": {{ nethermind_pivot_number }},
    "PivotHash": "0x0",
    "PivotTotalDifficulty": "0x0",
    "FastSyncCatchUpHeightDelta": 1000,
    "FastSyncCatchUpDelayDelta": 100,
    "FastSyncCatchUpDelayMultiplier": 1.5,
    "FastSyncCatchUpTimeoutSeconds": 300,
    "FastSyncCatchUpHeightDeltaThreshold": 5000,
    "FastSyncCatchUpDelayDeltaThreshold": 10000,
    "FastSyncCatchUpDelayMultiplierThreshold": 2.0,
    "FastSyncCatchUpTimeoutSecondsThreshold": 600,
    "FastSyncCatchUpEnabled": true,
    "FastSyncCatchUpStateRootHash": "0x0",
    "FastSyncCatchUpStateRootHashEnabled": false,
    "FastSyncCatchUpStateRootHashPivotNumber": 0,
    "FastSyncCatchUpStateRootHashPivotHash": "0x0",
    "FastSyncCatchUpStateRootHashPivotTotalDifficulty": "0x0",
    "FastSyncCatchUpStateRootHashFastSyncCatchUpHeightDelta": 1000,
    "FastSyncCatchUpStateRootHashFastSyncCatchUpDelayDelta": 100,
    "FastSyncCatchUpStateRootHashFastSyncCatchUpDelayMultiplier": 1.5,
    "FastSyncCatchUpStateRootHashFastSyncCatchUpTimeoutSeconds": 300,
    "FastSyncCatchUpStateRootHashFastSyncCatchUpHeightDeltaThreshold": 5000,
    "FastSyncCatchUpStateRootHashFastSyncCatchUpDelayDeltaThreshold": 10000,
    "FastSyncCatchUpStateRootHashFastSyncCatchUpDelayMultiplierThreshold": 2.0,
    "FastSyncCatchUpStateRootHashFastSyncCatchUpTimeoutSecondsThreshold": 600
  },

  # JSON-RPC configuration
  "JsonRpc": {
    "Enabled": {{ nethermind_json_rpc_enabled | lower }},
    "Host": "{{ nethermind_json_rpc_host }}",
    "Port": {{ nethermind_json_rpc_port }},
    "EnabledModules": [
      {% for module in nethermind_http_modules %}
      "{{ module }}"{% if not loop.last %},{% endif %}
      {% endfor %}
    ],
    "WebSocketsEnabled": {{ nethermind_ws_enabled | lower }},
    "WebSocketsHost": "{{ nethermind_ws_host }}",
    "WebSocketsPort": {{ nethermind_ws_port }},
    "WebSocketsEnabledModules": [
      {% for module in nethermind_ws_modules %}
      "{{ module }}"{% if not loop.last %},{% endif %}
      {% endfor %}
    ],
    "EnginePort": {{ nethermind_engine_port }},
    "EngineHost": "{{ nethermind_engine_host }}",
    "JwtSecretFile": "jwt.hex",
    "RpcRecorderBaseFilePath": "logs/rpc.log",
    "RpcRecorderState": "None",
    "RpcRecorderBlockNumber": 0,
    "RpcRecorderBlockHash": "0x0",
    "RpcRecorderTrace": false,
    "RpcRecorderTraceToFile": false,
    "RpcRecorderTraceFilePath": "logs/rpc_trace.log",
    "RpcRecorderTraceMaxFileSizeInMb": 100,
    "RpcRecorderTraceMaxFiles": 10,
    "RpcRecorderTraceCompress": false,
    "RpcRecorderTraceCompressionLevel": 0,
    "RpcRecorderTraceBufferSize": 0,
    "RpcRecorderTraceFlushInterval": 0,
    "RpcRecorderTraceMaxConcurrentFiles": 1,
    "RpcRecorderTraceMaxFileAgeInDays": 0,
    "RpcRecorderTraceMaxDirectorySizeInMb": 0,
    "RpcRecorderTraceMaxDirectorySizeCheckIntervalInMinutes": 0,
    "RpcRecorderTraceMaxDirectorySizeCheckIntervalInFiles": 0,
    "RpcRecorderTraceMaxDirectorySizeCheckIntervalInSeconds": 0,
    "RpcRecorderTraceMaxDirectorySizeCheckIntervalInHours": 0,
    "RpcRecorderTraceMaxDirectorySizeCheckIntervalInDays": 0
  },

  # Metrics configuration
  "Metrics": {
    "Enabled": {{ nethermind_metrics_enabled | lower }},
    "NodeName": "Nethermind",
    "PushGatewayUrl": "",
    "PushIntervalSeconds": {{ nethermind_metrics_interval_seconds }},
    "PushGroupingKey": "",
    "PushGroupingKeyInstance": "",
    "PushGroupingKeyJob": "",
    "PushGroupingKeyNamespace": "",
    "PushGroupingKeySubsystem": "",
    "PushGroupingKeyType": "",
    "PushGroupingKeyVersion": "",
    "PushGroupingKeyEnvironment": "",
    "PushGroupingKeyInstanceLabelName": "instance",
    "PushGroupingKeyJobLabelName": "job",
    "PushGroupingKeyNamespaceLabelName": "namespace",
    "PushGroupingKeySubsystemLabelName": "subsystem",
    "PushGroupingKeyTypeLabelName": "type",
    "PushGroupingKeyVersionLabelName": "version",
    "PushGroupingKeyEnvironmentLabelName": "environment",
    "PushGroupingKeyInstanceLabelValue": "",
    "PushGroupingKeyJobLabelValue": "",
    "PushGroupingKeyNamespaceLabelValue": "",
    "PushGroupingKeySubsystemLabelValue": "",
    "PushGroupingKeyTypeLabelValue": "",
    "PushGroupingKeyVersionLabelValue": "",
    "PushGroupingKeyEnvironmentLabelValue": "",
    "PushGatewayUrlCustom": "",
    "PushGatewayJob": "nethermind",
    "PushGatewayInstance": "{{ inventory_hostname }}",
    "PushGatewayGroupingKey": {},
    "PushGatewayGroupingKeyInstance": "",
    "PushGatewayGroupingKeyJob": "",
    "PushGatewayGroupingKeyNamespace": "",
    "PushGatewayGroupingKeySubsystem": "",
    "PushGatewayGroupingKeyType": "",
    "PushGatewayGroupingKeyVersion": "",
    "PushGatewayGroupingKeyEnvironment": "",
    "PushGatewayGroupingKeyInstanceLabelName": "instance",
    "PushGatewayGroupingKeyJobLabelName": "job",
    "PushGatewayGroupingKeyNamespaceLabelName": "namespace",
    "PushGatewayGroupingKeySubsystemLabelName": "subsystem",
    "PushGatewayGroupingKeyTypeLabelName": "type",
    "PushGatewayGroupingKeyVersionLabelName": "version",
    "PushGatewayGroupingKeyEnvironmentLabelName": "environment",
    "PushGatewayGroupingKeyInstanceLabelValue": "",
    "PushGatewayGroupingKeyJobLabelValue": "",
    "PushGatewayGroupingKeyNamespaceLabelValue": "",
    "PushGatewayGroupingKeySubsystemLabelValue": "",
    "PushGatewayGroupingKeyTypeLabelValue": "",
    "PushGatewayGroupingKeyVersionLabelValue": "",
    "PushGatewayGroupingKeyEnvironmentLabelValue": ""
  },

  # Logging configuration
  "Logging": {
    "LogLevel": "{{ nethermind_log_level }}",
    "LogRules": [
      {
        "Name": "*",
        "MinLevel": "{{ nethermind_log_level }}",
        "WriteTo": ["file"]
      }
    ],
    "LogFileName": "nethermind.log",
    "LogDirectory": "/nethermind/logs",
    "LogFileRetentionDays": 7,
    "LogArchivePath": "/nethermind/logs/archive",
    "LogArchiveRetentionDays": 30,
    "LogArchivePartSizeMb": 100,
    "LogArchiveMaxArchiveFiles": 10,
    "LogArchiveMaxArchiveTotalSizeMb": 1000,
    "LogArchiveCompress": true,
    "LogArchiveCompressionLevel": 0,
    "LogArchiveBufferSize": 0,
    "LogArchiveFlushInterval": 0,
    "LogArchiveMaxConcurrentFiles": 1,
    "LogArchiveMaxFileAgeInDays": 0,
    "LogArchiveMaxDirectorySizeInMb": 0,
    "LogArchiveMaxDirectorySizeCheckIntervalInMinutes": 0,
    "LogArchiveMaxDirectorySizeCheckIntervalInFiles": 0,
    "LogArchiveMaxDirectorySizeCheckIntervalInSeconds": 0,
    "LogArchiveMaxDirectorySizeCheckIntervalInHours": 0,
    "LogArchiveMaxDirectorySizeCheckIntervalInDays": 0
  },

  # Unsecured wallet configuration (use with caution in production)
  "Wallet": {
    "EnableUnsecuredDevWallet": {{ nethermind_enable_unsecured_dev_wallet | lower }},
    "EnableUnsecuredDevWalletWhenNoProducer": {{ nethermind_enable_unsecured_dev_when_no_producer | lower }}
  }
}
